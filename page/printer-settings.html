<!--
 Copyright (C) 2020 Posterita Ltd
 
 This file is part of Posterita POS.
 
 Posterita POS is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.
 
 Posterita POS is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 
 You should have received a copy of the GNU General Public License
 along with Posterita POS.  If not, see <http://www.gnu.org/licenses/>.
-->

<ons-page ng-controller="PrinterSettingsController"> 
	<ons-toolbar fixed-style>
		
		<div class="left">
			<ons-toolbar-button onclick="menu.setMainPage('page/settings.html', {closeMenu: true})">
			<ons-icon icon="ion-ios-arrow-back"></ons-icon>Back
			</ons-toolbar-button>
		</div>
		<div class="center">Printer Settings</div>
		<div class="right">
			<!-- 
			<ons-toolbar-button ng-click="save()">
			<ons-icon icon="ion-save" style="font-size: 32px; width: 1em;"></ons-icon> Save
			</ons-toolbar-button>
			 -->
		</div>
	</ons-toolbar>

	<form name="form" novalidate="novalidate" autocomplete="off" ng-submit="save()">
	<ons-list>
       <ons-list-header>Printer Settings</ons-list-header>

       <ons-list-item>
	       <label>Enable Printer</label>
	       <ons-switch modifier="list-item" ng-model="settings.enablePrinter"></ons-switch>
       </ons-list-item>
       
       <!-- 
       <ons-list-item ng-show="settings.enablePrinter">
	       <label>Enable Kitchen Receipt</label>
	       <ons-switch modifier="list-item" ng-model="settings.enableKitchenPrinter"></ons-switch>
       </ons-list-item>
        -->
       
       <ons-list-item ng-show="settings.enablePrinter">
       		<label>Enable Cash Drawer</label>
       		<ons-switch modifier="list-item" ng-model="settings.enableDrawer"></ons-switch>
       </ons-list-item>  
       
       <ons-list-header ng-show="settings.enablePrinter">Choose Printer</ons-list-header> 
       <ons-list-item ng-show="settings.enablePrinter">
       		<ons-row>
	       		<ons-col>
	       		<select ng-model="settings.printerName" required>
	       			<option ng-repeat="printer in printers track by $index" value="{{printer}}"  ng-selected="printer == settings.printerName">
						{{printer}}
					</option>
	       		</select>
	       		</ons-col>
	       		<ons-col width="150px">
	        		<div style="text-align:right;">
	        			<ons-button class="button" ng-click="testPrinter()">Test Printer</ons-button>
	        		</div>
	        	</ons-col>  
       		</ons-row>
       </ons-list-item>  
       
       <ons-list-header ng-show="settings.enablePrinter">Enter Printer line width</ons-list-header> 
       <ons-list-item ng-show="settings.enablePrinter">
       		<ons-row>
       			<input type="text" name="lineWidth" id="printer-line-width-text" placeholder="Enter Printer line width" convertToNumber ng-virtual-keyboard="{kt:'Numeric', customClass:'keyboardNumeric'}"
        			ng-model="settings.lineWidth"
        			required 
        			class="text-input text-input--transparent" style="margin-top:8px; width: 100%;">
       		</ons-row>
       </ons-list-item> 
       
       <ons-list-item ng-show="showPoleDisplaySettings()">
       		<label>Enable Pole Display</label>
       		<ons-switch modifier="list-item" ng-model="settings.enablePoleDisplay"></ons-switch>
       </ons-list-item>  
       
       <ons-list-header ng-show="settings.enablePoleDisplay">Choose Pole Display</ons-list-header> 
       <ons-list-item ng-show="settings.enablePoleDisplay">
       		<ons-row>
	       		<ons-col>
	       			<select ng-model="settings.poleDisplayName" required>
		       			<option ng-repeat="printer in printers track by $index" value="{{printer}}"  ng-selected="printer == settings.poleDisplayName">
							{{printer}}
						</option>
	       			</select>
	       		</ons-col>
	       		<ons-col width="150px">
	        		<div style="text-align:right;">
	        			<ons-button class="button" ng-click="testPoleDisplay()">Test Pole Display</ons-button>
	        		</div>
	        	</ons-col>       		
       		</ons-row>
       </ons-list-item>  
        
        <!-- 
        <ons-list-header ng-show="settings.enablePrinter && settings.printerType != null">Printer IP Address</ons-list-header>
        <ons-list-item ng-show="settings.enablePrinter && settings.printerType != null">
        	<ons-row>
        		<ons-col>
        		
        			<input type="text" name="ipAddress" id="printer-ip-address-text" placeholder="Enter printer ip address"
        			ng-model="settings.ipAddress"
        			required 
        			class="text-input text-input--transparent" style="margin-top:8px; width: 100%;">
					        			
        		</ons-col>
        		<ons-col width="150px">
        			<div style="text-align:right;">
        				<ons-button class="button" ng-click="test()">Test Printer</ons-button>
        			</div>        			
        		</ons-col>
        	</ons-row>        	
        </ons-list-item>
         -->
	</ons-list>
        
    <div style="margin: 20px 8px 0px;">
      <button class="button button--large" type="submit">Save</button>
    </div>
    
    </form>
</ons-page> 
