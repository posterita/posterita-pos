<!--
 Copyright (C) 2020 Posterita Ltd
 
 This file is part of Posterita POS.
 
 Posterita POS is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.
 
 Posterita POS is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 
 You should have received a copy of the GNU General Public License
 along with Posterita POS.  If not, see <http://www.gnu.org/licenses/>.
-->

<ons-dialog var="split_dialog_global">

    <ons-toolbar inline>
      <div class="center">
        <strong>Split R{{cart.grandtotal | number:2 }}</strong>
      </div>
    </ons-toolbar>
    
    
    <form novalidate="novalidate" autocomplete="off" name="form" class="form-default" style="margin: 20px;" ng-controller="SplitDialogController as ctrl">
    
    <div class="error" ng-show="ctrl.remainder() > 0">
    	Remainder: {{ ctrl.remainder() }}
    </div>   
    
    <div class="input-group">
		<label>
			<ons-icon icon="ion-cash" style="font-size: 40px;padding-right: 4px;"></ons-icon>
			Enter Cash Amount
		</label>
		<input type="text" ng-class="{'selected': ctrl.mode == 'CASH' }" ng-model="ctrl.cash_amount" name="card_amount" id="cash_dialog_cash_amount" required placeholder="Cash Amount" ng-focus="ctrl.mode='CASH'">
		
	</div>
	
	<div class="input-group">
		<label>
			<ons-icon icon="ion-card" style="font-size: 40px;padding-right: 4px;"></ons-icon>
			Enter Card Amount
		</label>
		<input type="text" ng-class="{'selected': ctrl.mode == 'CARD' }" ng-model="ctrl.card_amount" name="cash_amount" id="split_dialog_card_amount" required placeholder="Card Amount" ng-focus="ctrl.mode='CARD'">
		
	</div>
	
	<div class="numeric-keypad">
		<table>
			<tr>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('1')">1</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('2')">2</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('3')">3</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('backspace')">
						<ons-icon icon="ion-backspace"></ons-icon>
					</ons-button>
				</td>
			</tr>
			<tr>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('4')">4</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('5')">5</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('6')">6</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('+/-')">+/-</ons-button>
				</td>
			</tr>
			<tr>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('7')">7</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('8')">8</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('9')">9</ons-button>
				</td>
				<td>
					&nbsp;
				</td>
			</tr>
			<tr>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('0')">0</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('00')">00</ons-button>
				</td>
				<td>
					<ons-button class="button--large button--outline" ng-click="ctrl.press('.')">.</ons-button>
				</td>
				<td>
					&nbsp;
				</td>
			</tr>
		</table>
	</div>
	
	<div class="input-group">
		<ons-row>
			<ons-col>
				<ons-button class="button--large button--outline" ng-click="ctrl.cancel()">Cancel</ons-button>
			</ons-col>
			<ons-col>
				&nbsp;
			</ons-col>
			<ons-col>
				<ons-button class="button--large" ng-click="ctrl.ok()" ng-disabled="!form.$valid || !ctrl.validate()">OK</ons-button>
			</ons-col>
		</ons-row>
	</div>
    
    </form>

</ons-dialog>
